# Инструкция по исправлению кракозябр на сайте

## Проблема

На страницах медитаций, магазина и товаров отображаются кракозябры вместо нормального русского текста.

## Причина

Данные в базе данных MySQL хранятся в неправильной кодировке (Windows-1251 вместо UTF-8). Это произошло при миграции данных из JSON файлов в базу данных.

## Решение

### Вариант 1: Исправление данных в базе данных (рекомендуется)

1. **Загрузите файл `fix-encoding.php` на сервер**
2. **Откройте в браузере**: `https://cherkas-therapy.ru/fix-encoding.php`
3. **Скрипт автоматически:**
   - Проверит кодировку в базе данных
   - Найдет записи с кракозябрами
   - Исправит кодировку с Windows-1251 на UTF-8
   - Покажет результаты исправления

### Вариант 2: Временное решение с fallback на JSON

Уже реализовано в коде:

- Если данные в БД содержат кракозябры, система автоматически переключится на JSON файлы
- Это обеспечит корректное отображение контента

## Файлы, которые были изменены

1. **`includes/fallback-data.php`** - новый файл с функциями fallback
2. **`meditations.php`** - обновлен для использования fallback
3. **`shop.php`** - обновлен для использования fallback
4. **`product.php`** - обновлен для использования fallback
5. **`fix-encoding.php`** - скрипт для исправления кодировки в БД
6. **`debug-encoding.php`** - скрипт для диагностики проблем

## Проверка результатов

После исправления проверьте:

- [ ] Страница медитаций: `/meditations.php`
- [ ] Страница магазина: `/shop.php`
- [ ] Страница товара: `/product.php?slug=free-meditation`

## Дополнительные рекомендации

1. **Сделайте бэкап базы данных** перед запуском `fix-encoding.php`
2. **Проверьте логи** на наличие ошибок после исправления
3. **Удалите временные файлы** после успешного исправления:
   - `fix-encoding.php`
   - `debug-encoding.php`

## Технические детали

### Паттерны кракозябр, которые исправляются:

- `РўРµСЃСЃ` → `Тест`
- `РџРѕСЋС‰РёРµ` → `Поющие`
- `РўРёР±РµС‚` → `Тибет`
- `РџРѕРіСЂСѓР·Рё` → `Погрузи`
- `РљСЂР°С` → `Кра`
- `РєРѕРµ` → `кое`
- `РїСЂРёСЂРѕРґС‹` → `природы`

### Таблицы, которые обрабатываются:

- `meditations` (title, description, subtitle)
- `meditation_categories` (name, description)
- `products` (title, description, short_description, content)
- `product_categories` (name, description)
- `articles` (title, content, excerpt)
- `article_categories` (name, description)
- `reviews` (name, text, comment)

## Контакты

Если возникнут проблемы, обратитесь к разработчику с логами ошибок.

