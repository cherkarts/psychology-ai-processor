# Универсальная шапка с анимацией

## Описание

Универсальная шапка для всех страниц сайта с автоматическим скрытием при скролле вниз и появлением при скролле вверх. Включает в себя:

- **Умное скрытие**: Шапка скрывается при скролле вниз и появляется при скролле вверх
- **Сворачивание**: При скролле вверх показывается только меню (свернутое состояние)
- **Иконка корзины**: Автоматически появляется на страницах магазина, корзины и оформления заказа
- **Адаптивность**: Полная поддержка мобильных устройств
- **Доступность**: Поддержка клавиатурной навигации и screen readers

## Файлы

### Основные файлы

- `includes/new-header.php` - HTML структура шапки
- `css/universal-header.css` - Стили для универсальной шапки
- `js/universal-header.js` - JavaScript функциональность
- `includes/universal-header-assets.php` - Подключение CSS и JS

### Интеграция

Для подключения универсальной шапки на странице добавьте в `<head>`:

```php
<!-- Универсальная шапка -->
<?php include 'includes/universal-header-assets.php'; ?>
```

И в `<body>`:

```php
<!-- Универсальная шапка -->
<?php include 'includes/new-header.php'; ?>
```

## Функциональность

### Автоматическое скрытие/показ

- При скролле вниз более чем на 200px - шапка полностью скрывается
- При скролле вверх - шапка появляется
- При скролле вверх более чем на 150px - показывается свернутое состояние (только меню)
- Вверху страницы (менее 100px) - всегда показывается полная шапка

### Иконка корзины

Автоматически появляется на страницах:

- `/shop` - страница магазина
- `/product` - страницы товаров
- `/cart` - страница корзины
- `/checkout` - страница оформления заказа

### Мобильное меню

- Кнопка-гамбургер для открытия меню
- Полноэкранное мобильное меню
- Закрытие по клику на ссылку или вне меню
- Закрытие по клавише Escape

## Настройка

### Изменение порогов скролла

В файле `js/universal-header.js` можно изменить:

```javascript
this.scrollThreshold = 100 // Порог для начала скрытия
this.hideThreshold = 200 // Порог для полного скрытия
this.collapseThreshold = 150 // Порог для сворачивания
```

### Добавление новых страниц с корзиной

В файле `includes/new-header.php` в массиве `$showCart`:

```php
$showCart = (
    strpos($path, '/shop') !== false ||
    strpos($path, '/product') !== false ||
    strpos($path, '/tovar') !== false ||
    strpos($path, '/cart') !== false ||
    strpos($path, '/checkout') !== false ||
    strpos($path, '/new-page') !== false  // Добавить новую страницу
);
```

## API

### JavaScript API

```javascript
// Получить экземпляр шапки
const header = window.universalHeader

// Принудительно показать шапку
header.forceShow()

// Принудительно скрыть шапку
header.forceHide()

// Получить текущее состояние
const state = header.getState()
console.log(state.isHidden, state.isCollapsed, state.scrollTop)

// Обновить настройки
header.updateSettings({
  scrollThreshold: 150,
  hideThreshold: 250,
  collapseThreshold: 200,
})
```

### События

```javascript
// Событие обновления корзины
document.addEventListener('cartUpdated', () => {
  // Корзина обновлена
})
```

## Стили

### CSS классы

- `.header` - основной контейнер шапки
- `.header--hidden` - скрытое состояние
- `.header--collapsed` - свернутое состояние
- `.header__top` - верхняя часть шапки
- `.header__nav` - навигационное меню
- `.header__cart` - контейнер корзины
- `.cart-counter` - счетчик товаров в корзине

### Кастомизация

Для изменения внешнего вида отредактируйте `css/universal-header.css`:

```css
/* Изменить цвет фона */
.header {
  background: rgba(255, 255, 255, 0.95);
}

/* Изменить скорость анимации */
.header {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
```

## Совместимость

- ✅ Все современные браузеры
- ✅ Мобильные устройства
- ✅ Планшеты
- ✅ Поддержка `prefers-reduced-motion`
- ✅ Доступность (ARIA, клавиатурная навигация)

## Обновленные страницы

Универсальная шапка интегрирована на всех основных страницах:

- ✅ Главная страница (`index.php`)
- ✅ Услуги (`services.php`)
- ✅ Обо мне (`about.php`)
- ✅ Отзывы (`reviews.php`)
- ✅ Цены (`prices.php`)
- ✅ Контакты (`contact.php`)
- ✅ Медитации (`meditations.php`)
- ✅ Статьи (`articles.php`, `article.php`)
- ✅ Магазин (`shop.php`)
- ✅ Товары (`product.php`)
- ✅ Корзина (`cart.php`)
- ✅ Оформление заказа (`checkout.php`)
- ✅ Специализированные страницы (`anxiety.php`, `relationships.php`)
- ✅ Политика конфиденциальности (`privacy-policy.php`)

## Техническая поддержка

При возникновении проблем:

1. Проверьте консоль браузера на наличие ошибок JavaScript
2. Убедитесь, что все файлы подключены корректно
3. Проверьте, что `includes/new-header.php` существует и доступен
4. Убедитесь, что CSS и JS файлы загружаются без ошибок

## Версия

Версия: 1.0  
Дата создания: Декабрь 2024  
Автор: AI Assistant
